---
  - name: Initial setup
    hosts: all
    roles:
      - init
  
  - name: Database server
    hosts: db_servers
    roles:
      - mysql

  - name: update and setup agama
    hosts: web_servers
    roles:
      - agama
      - uwsgi
      - nginx

  - name: setup bind9
    hosts: dns_servers
    roles:
      - bind

  - name: Change the dns resov for bind9
    hosts: all
    roles:
      - bind_resolv

  - name: configure nginx
    hosts: web_servers
    roles:
      - nginx_conf

  - name: Install and configure prometheus
    hosts: prometheus_servers
    roles:
      - prometheus
  